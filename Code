# Text-Based Adventure Game in PowerShell with Updated Directions (up, down, right, left)

# Function to display game instructions
function Show-Instructions {
    Write-Host "
    Text-Based Adventure Game
    =========================
    Commands:
    - 'go [direction]' to move (e.g., 'go up')
    - 'get [item]' to pick up an item (e.g., 'get key')
    - 'use [item]' to use an item (e.g., 'use key')
    - 'inventory' to check your items
    - 'look' to inspect the current room (reveals hidden items)
    - 'quit' to exit the game
    "
}

# Initialize game data
$Rooms = @{
    "Hall" = @{
        Description = "You are in a grand hall. There's a key on a table.";
        Item = "key";
        HiddenItem = $null;  # No hidden item here
        Exits = @{ Up = "Kitchen"; Right = "Living Room" }
    };
    "Kitchen" = @{
        Description = "You are in a kitchen. The air smells of spices.";
        Item = $null;
        HiddenItem = "map";  # Hidden item: Map
        Exits = @{ Down = "Hall" }
    };
    "Living Room" = @{
        Description = "You are in a cozy living room. A locked treasure chest sits in the corner.";
        Item = $null;  # Treasure is locked inside the chest
        HiddenItem = "note"; # Hidden item: A note giving a clue
        Exits = @{ Left = "Hall" };
        Locked = $true
    }
}

$Inventory = @()
$CurrentRoom = "Hall"

# Start the game
Show-Instructions

while ($true) {
    Write-Host "`nYou are in the $CurrentRoom."
    Write-Host $Rooms[$CurrentRoom].Description

    # Show visible items in the room
    if ($Rooms[$CurrentRoom].Item) {
        Write-Host "You see a $($Rooms[$CurrentRoom].Item) here."
    }

    # Get user input
    $Command = Read-Host "What will you do?"

    # Exit the game
    if ($Command -eq "quit") {
        Write-Host "Thanks for playing! Goodbye."
        break
    }

    # Moving between rooms
    elseif ($Command -like "go *") {
        $Direction = $Command -replace "go ", ""
        if ($Rooms[$CurrentRoom].Exits.$Direction) {
            $CurrentRoom = $Rooms[$CurrentRoom].Exits.$Direction
        } else {
            Write-Host "You can't go that way!"
        }
    }

    # Picking up items
    elseif ($Command -like "get *") {
        $Item = $Command -replace "get ", ""
        if ($Rooms[$CurrentRoom].Item -eq $Item) {
            Write-Host "You picked up the $Item!"
            $Inventory += $Item
            $Rooms[$CurrentRoom].Item = $null
        } elseif ($Rooms[$CurrentRoom].HiddenItem -eq $Item) {
            Write-Host "You picked up the hidden $Item!"
            $Inventory += $Item
            $Rooms[$CurrentRoom].HiddenItem = $null
        } else {
            Write-Host "There is no $Item here."
        }
    }

    # Using items
    elseif ($Command -like "use *") {
        $Item = $Command -replace "use ", ""
        if ($Inventory -contains $Item) {
            if ($Item -eq "key" -and $CurrentRoom -eq "Living Room" -and $Rooms[$CurrentRoom].Locked) {
                Write-Host "You use the key to unlock the treasure chest!"
                $Rooms[$CurrentRoom].Locked = $false
                $Rooms[$CurrentRoom].Item = "treasure"
                $Inventory = $Inventory | Where-Object { $_ -ne "key" }  # Remove key from inventory
            } else {
                Write-Host "You can't use the $Item here."
            }
        } else {
            Write-Host "You don't have a $Item."
        }
    }

    # Checking inventory
    elseif ($Command -eq "inventory") {
        if ($Inventory.Count -gt 0) {
            Write-Host "Inventory: $($Inventory -join ', ')"
        } else {
            Write-Host "Your inventory is empty."
        }
    }

    # Inspecting the room (look command reveals hidden items)
    elseif ($Command -eq "look") {
        Write-Host $Rooms[$CurrentRoom].Description
        if ($Rooms[$CurrentRoom].Item) {
            Write-Host "You see a $($Rooms[$CurrentRoom].Item) here."
        }
        if ($Rooms[$CurrentRoom].HiddenItem) {
            Write-Host "After looking closely, you find a hidden $($Rooms[$CurrentRoom].HiddenItem)!"
            # Move the hidden item to visible items
            $Rooms[$CurrentRoom].Item = $Rooms[$CurrentRoom].HiddenItem
            $Rooms[$CurrentRoom].HiddenItem = $null
        } else {
            Write-Host "You don't find anything else of interest."
        }
    }

    # Unknown command
    else {
        Write-Host "I don't understand that command."
    }

    # Win condition
    if ($Inventory -contains "treasure") {
        Write-Host "`nCongratulations! You found the treasure and won the game!"
        break
    }
}

